<!DOCTYPE html>
<html lang="es" xmlns="http://www.thymeleaf.org">
<head th:replace="~{fragments/head :: head}">
    <title>Login - PocketBook</title>
</head>
<body class="d-flex flex-column min-vh-100">
  <!--CSS-->
  <link th:href="@{/css/login/imagencentral.css}" href="/css/login/imagencentral.css" rel="stylesheet">
  <link th:href="@{/css/login/form.css}" href="/css/login/form.css" rel="stylesheet">
  
    <!--NAVBAR-->
    <nav class="navbar navbar-light bg-primary">
  <div class="container-fluid d-flex justify-content-center align-items-center">
    <a class="navbar-brand d-flex align-items-center gap-2" href="#">
      <img th:src="@{/image/factura.png}" src="/image/factura.png" alt="PocketBook" width="30" height="24" class="d-inline-block align-text-top">
      <span class="text-white">PocketBook</span>
    </a>
  </div>
</nav>

<!--FORM-->
<main class="form-signin d-flex flex-column align-items-center flex-grow-1 image-central">
  
  <!-- MENSAJE DE ÉXITO DESDE REGISTRO -->
  <div th:if="${mensajeExito}" class="alert alert-success alert-dismissible fade show" role="alert" style="width: 350px; margin-bottom: 1rem;">
    <i class="bi bi-check-circle-fill me-2"></i>
    <span th:text="${mensajeExito}"></span>
    <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
  </div>

  <!-- MENSAJE DE ERROR DE AUTENTICACIÓN -->
  <div th:if="${error}" class="alert alert-danger alert-dismissible fade show" role="alert" style="width: 350px; margin-bottom: 1rem;">
    <i class="bi bi-exclamation-triangle-fill me-2"></i>
    <span th:text="${error}"></span>
    <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
  </div>

  <!-- MENSAJE DE LOGOUT -->
  <div th:if="${mensaje}" class="alert alert-info alert-dismissible fade show" role="alert" style="width: 350px; margin-bottom: 1rem;">
    <i class="bi bi-info-circle-fill me-2"></i>
    <span th:text="${mensaje}"></span>
    <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
  </div>

  <form id="form" novalidate th:action="@{/login}" method="post" class="border border-dark rounded form-class p-4" style="width: 350px;">
    <img class="mb-3 d-block mx-auto" th:src="@{/image/login.png}" src="/image/login.png" alt="" width="60" height="60">
    <h1 class="h3 mb-3 fw-normal text-center">Inicia sesión</h1>

    <div class="form-floating mb-3">
      <input type="email" name="username" class="form-control" id="inputEmail" placeholder="name@example.com" required>
      <label for="inputEmail">Correo</label>
      <p id="emailError" class="emailError"></p>
    </div>
    <div class="form-floating mb-3">
      <input type="password" name="password" class="form-control" id="inputPassword" placeholder="Password" required>
      <label for="inputPassword">Contraseña</label>
      <p id="passError" class="passError"></p>
    </div>

    <div class="checkbox mb-3">
      <label>
        <input type="checkbox" name="remember-me"> Recuerdame
      </label>
    </div>
    <button id="loginForm" class="w-100 btn btn-lg btn-primary mb-4" type="submit">Iniciar sesión</button>
    <p id="warning" class="warning"></p>
    <p>¿No tienes una cuenta? <a th:href="@{/crearcuenta}" href="/crearcuenta"><br>Crear cuenta</a></p>
  </form>
  
</main>

<!--FOOTER-->
<footer class="bg-primary text-center text-lg-start mt-auto">
  <div class="container-fluid text-center p-3">
    <span class="text-white">© 2025 PocketBook</span>
  </div>
  <div class="text-center">
      <h6 class="text-white">Todos los derechos reservados</h6>
  </div>
</footer>

<!-- SCRIPTS -->
<div th:replace="~{fragments/scripts :: scripts}"></div>
<script th:src="@{/js/login/login.js}" src="/js/login/login.js"></script>
</body>
</html>