<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{fragments/head :: head}">
    <title>Crear Cuenta - PocketBook</title>
</head>
<body class="d-flex flex-column min-vh-100">
  <!--CSS-->
  <link th:href="@{/css/register/imagencentral.css}" href="/css/register/imagencentral.css" rel="stylesheet">
  <link th:href="@{/css/register/form.css}" href="/css/register/form.css" rel="stylesheet">
  
    <!--NAVBAR-->
    <nav class="navbar navbar-light bg-primary">
  <div class="container-fluid d-flex justify-content-center align-items-center">
    <a class="navbar-brand d-flex align-items-center gap-2" href="#">
      <img th:src="@{/image/factura.png}" src="/image/factura.png" alt="PocketBook" width="30" height="24" class="d-inline-block align-text-top">
      <span class="text-white">PocketBook</span>
    </a>
  </div>
</nav>

<!--FORM-->
<main class="form-signin d-flex flex-column align-items-center flex-grow-1 image-central">
  
  <!-- MENSAJE DE ERROR DEL SERVIDOR -->
  <div th:if="${error}" class="alert alert-danger alert-dismissible fade show" role="alert" style="width: 380px; margin-bottom: 1rem;">
    <i class="bi bi-exclamation-triangle-fill me-2"></i>
    <span th:text="${error}"></span>
    <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
  </div>

  <form id="form" 
        novalidate 
        th:action="@{/registro}" 
        th:object="${registroDTO}" 
        method="post" 
        class="border border-dark rounded form-class p-4" 
        style="width: 380px;">
    
    <img class="mb-3 d-block mx-auto" th:src="@{/image/login.png}" src="/image/login.png" alt="" width="60" height="60">
    <h1 class="h3 mb-3 fw-normal text-center">Crear cuenta</h1>

    <!-- NOMBRE -->
    <div class="form-floating mb-3">
      <input type="text" 
             class="form-control" 
             id="inputNombre" 
             name="nombre"
             th:field="*{nombre}"
             placeholder="Nombre completo">
      <label for="inputNombre">Nombre completo</label>
      <p class="text-danger small mt-1 mb-0" id="nombreError"></p>
      <p class="text-danger small mt-1 mb-0" th:if="${#fields.hasErrors('nombre')}" th:errors="*{nombre}"></p>
    </div>

    <!-- EMAIL -->
    <div class="form-floating mb-3">
      <input type="email" 
             class="form-control" 
             id="inputEmail" 
             name="email"
             th:field="*{email}"
             placeholder="name@example.com">
      <label for="inputEmail">Correo electrónico</label>
      <p class="text-danger small mt-1 mb-0" id="emailError"></p>
      <p class="text-danger small mt-1 mb-0" th:if="${#fields.hasErrors('email')}" th:errors="*{email}"></p>
    </div>

    <!-- CONTRASEÑA -->
    <div class="form-floating mb-3">
      <input type="password" 
             class="form-control" 
             id="inputPassword" 
             name="password"
             th:field="*{password}"
             placeholder="Password">
      <label for="inputPassword">Contraseña</label>
      <p class="text-danger small mt-1 mb-0" id="passError"></p>
      <p class="text-danger small mt-1 mb-0" th:if="${#fields.hasErrors('password')}" th:errors="*{password}"></p>
    </div>

    <!-- CONFIRMAR CONTRASEÑA -->
    <div class="form-floating mb-3">
      <input type="password" 
             class="form-control" 
             id="inputConfirmPassword" 
             name="confirmPassword"
             th:field="*{confirmPassword}"
             placeholder="Confirmar contraseña">
      <label for="inputConfirmPassword">Confirmar contraseña</label>
      <p class="text-danger small mt-1 mb-0" id="confirmPassError"></p>
      <p class="text-danger small mt-1 mb-0" th:if="${#fields.hasErrors('confirmPassword')}" th:errors="*{confirmPassword}"></p>
    </div>

    <!-- TÉRMINOS -->
    <div class="checkbox mb-3">
      <label>
        <input type="checkbox" 
               id="inputTerminos" 
               name="aceptaTerminos"
               th:field="*{aceptaTerminos}"> 
        Acepto los <a href="#" onclick="event.preventDefault()">términos y condiciones</a>
      </label>
    </div>

    <!-- WARNING GENERAL -->
    <p class="text-center mb-3" id="warning"></p>

    <!-- BOTÓN -->
    <button id="registerForm" class="w-100 btn btn-lg btn-primary mb-3" type="submit">Crear cuenta</button>
    
    <p class="text-center">¿Ya tienes una cuenta? <a th:href="@{/login}" href="/login">Iniciar sesión</a></p>
  </form>
</main>

<!--FOOTER-->
<footer class="bg-primary text-center text-lg-start mt-auto">
  <div class="container-fluid text-center p-3">
    <span class="text-white">© 2025 PocketBook</span>
  </div>
  <div class="text-center">
      <h6 class="text-white">Todos los derechos reservados</h6>
  </div>
</footer>

<!-- SCRIPTS -->
<div th:replace="~{fragments/scripts :: scripts}"></div>
<script th:src="@{/js/register/register.js}" src="/js/register/register.js"></script>
</body>
</html>